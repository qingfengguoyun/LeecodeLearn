<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">


    <!-- Toastr style -->
    <link href="/css/plugins/toastr/toastr.min.css" rel="stylesheet">

    <meta charset="utf-8">
</head>
<body>
<!--博文板块-->
<div id="articleTitle" class="ibox-content profile-content" style="background-color: #d9d9d9" th:if="${articleDto!=null}">
<!--    保存文章Id的隐藏div-->
    <div id="articleId" th:attrappend="articleId=${articleDto.articleId}" hidden="hidden"></div>
    <h2>
        <strong th:text="${articleDto.articleTitle}"></strong>
    </h2>
    <div style="overflow: hidden">
        <div class="col-md-3" style="width:100px;display: inline-block;padding: 0px">

            <i class="fa fa-user-circle" style="float: left;padding: 5px 5px;"></i>
            <h5><strong th:text="${articleDto.userName}"></strong></h5>
        </div>
        <div class="col-md-3" style="width:300px;display: inline-block;padding: 0px">

            <i class="fa fa-clock-o" style="float: left;padding: 5px 5px;"></i>
            <h5><strong th:text="${#dates.format(articleDto.articleDate, 'yyyy-MM-dd')}"></strong></h5>
        </div>
        <div class="col-md-3" style="width: 10%;display: inline-block;padding: 0px">
            <i class="fa fa-heart" style="float: left;padding: 5px 5px;"></i>
            <h5><strong th:text="${articleDto.articleLikeCount}"></strong></h5>
        </div>
        <div class="col-md-9" style="width: 10%;display: inline-block;padding: 0px">
            <i class="fa fa-comments" style="float: left;padding: 5px 5px;"></i>
            <h5><strong th:text="${articleDto.articleCommentCount}"></strong></h5>
        </div>
    </div>
</div>
<div id="articleContent" class="ibox-content profile-content" style="margin-bottom: 20px;overflow: hidden">
    <div th:utext="${articleDto.articleContent}"></div>
</div>

<!--评论板块-->
<div id="comment" class="row"  style="border: 1px solid #e2e5e7;padding: 0px 0px;margin: 0px 0px" th:if="${commentDtoPage!=null}">
    <div class="col-lg-12">
        <h2>评论:</h2>
<!--        单个评论-->
        <div class="social-feed-box" th:each="commentDto:${commentDtoPage.list}" style="overflow: hidden">
            <div class="social-avatar">
                <a href="" class="float-left">
                    <img alt="image" th:src="'/img/'+${commentDto.userPhoto}">
                </a>
                <div class="media-body">
                    <a href="#" th:text="${commentDto.userName}"></a>
                    <small class="text-muted" th:text="${commentDto.commentDate}"></small>
                </div>
            </div>
            <div class="social-body" style="color: #908eb8;padding-bottom:0px "
                 th:if="${commentDto.parentCommentContent!=null}">
                <span>回复：</span>
                <p th:utext="${commentDto.parentCommentContent}"></p>
            </div>
            <div class="social-body" style="overflow: hidden">
                <p th:utext="${commentDto.commentContent}"></p>
            </div>
            <div class="social-body">
                <p>
                    <button type="button" class="btn btn-outline btn-primary" style="display: inline-block;float: right" th:attrappend="commentId=${commentDto.commentId}" onclick="showReply(this)">回复</button>
                </p>
            </div>
            <div class="social-body comment-reply" th:attrappend="commentId=${commentDto.commentId}" style="overflow: hidden">
                放置回复框
            </div>
<!--            提交评论按钮-->
            <div class="social-body" th:attrappend="admitId=${commentDto.commentId}" style="float: right;" hidden="hidden">
                <button type="button" class="btn btn-outline btn-primary quitComment"  onclick="quit(this)">取消</button>
                <button type="button" class="btn btn-outline btn-primary admitComment"  onclick="admit(this)">发送</button>
            </div>
        </div>
<!--        换页按钮-->
        <div class="ibox-content">
            <div class="btn-group">
                <button type="button" class="btn btn-white"><i class="fa fa-chevron-left"></i></button>
                <div th:with="startpage=${commentDtoPage['pageNo']-5>1?commentDtoPage['pageNo']-1:1}"></div>
                <div th:with="endpage=${commentDtoPage['pageNo']+5>commentDtoPage.pages?commentDtoPage['pageNo']+5:commentDtoPage.pages}"></div>
                <div th:each="i: ${#numbers.sequence(commentDtoPage['pageNo']-5,commentDtoPage['pageNo']+5)}">
                    <button class="btn btn-white" th:if="${i>0 and i<=commentDtoPage.pages}"  th:text="${i}" th:classappend="${commentDtoPage.pageNo==i?'active':''}"
                            th:onclick="|queryCommentByArticleIdAndPageNo(${commentDtoPage.list[0].articleId},${i})|">
                    </button>


                </div>
                <button type="button" class="btn btn-white"><i class="fa fa-chevron-right"></i> </button>
            </div>
        </div>
    </div>

</div>

<!--博文评论板块-->
<div class="wrapper wrapper-content" style="border: 1px solid #e2e5e7;padding: 15px 15px;margin: 20px 0px">
    <div class="row" >
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>发表评论</h5>
                </div>
                <div class="main-reply">
                    <div class="ibox-content no-padding" >

                        <div class="main-summernote">
                        </div>
                    </div>
                    <div class="social-body" style="float: right;">
                        <!--                    <button type="button" class="btn btn-outline btn-primary quitComment"  onclick="quit(this)">取消</button>-->
                        <button type="button" class="btn btn-outline btn-primary admitComment"  onclick="mainAdmit()">发送</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    $(function () {
        //生成主回复区的富文本编辑器
        $(".main-summernote").summernote({
            toolbar: [
                ['style', ['bold', 'italic', 'underline', 'clear']],
                ['color', ['color']],
                ['para', ['ul', 'ol']],
                ['insert', ['picture']]
            ],

            // focus:true,
            // 重写图片上传与回显方法
            onImageUpload:function (files,editor,welEditable) {
                saveCommentImage(files,editor,welEditable);
            },
        });
    })
</script>

</html>